/*
(x, y, z)
x' = x / z
y' = y / z
*/
const BACKGROUND_COLOR = '#000000'
const FOREGROUND_COLOR = '#00FF00'
const FONT_FACE = "Cascadia Code"

const delay = ms => new Promise(res => setTimeout(res, ms));

function clear() {
  ctx.fillStyle = BACKGROUND_COLOR
  ctx.fillRect(0, 0, animatedalpaca.width, animatedalpaca.height - 200)
}

// convent normal x,y coordinate system to screen coordinates
function screen(p) {
  // -1..1 => 0..width/height => 0..2 => 0..1 => 0..w
  const x = (p.x + 1)/2 * animatedalpaca.width
  const y = (1- (p.y + 1)/2) * animatedalpaca.height

  return {x, y}
}

function drawPoint({x, y}) {
  const size = 10
  ctx.fillStyle = FOREGROUND_COLOR
  ctx.fillRect(x - size/2, y - size/2, size, size)
}

function project({x, y, z}) {
  return {x: x / z, y: y / z}
}

const FPS = 60
let dz = 1
let angle = 0;

// alpaca
const coordinates = [
{x:0.072694, y:0.373885, z:-0.146637},
{x:0.068638, y:0.245803, z:-0.257233},
{x:0.085905, y:0.217973, z:-0.151632},
{x:0.059031, y:0.388711, z:-0.245399},
{x:0.069582, y:0.378051, z:-0.109967},
{x:0.093016, y:0.234869, z:-0.093359},
{x:0.101235, y:0.250759, z:-0.413581},
{x:0.068107, y:0.382527, z:-0.404808},
{x:0.067799, y:0.388501, z:-0.353144},
{x:0.059983, y:0.390021, z:-0.079020},
{x:0.050482, y:0.306763, z:-0.023100},
{x:0.079895, y:0.245142, z:-0.354157},
{x:0.057038, y:0.285170, z:-0.479993},
{x:0.062049, y:0.370438, z:-0.447990},
{x:0.089681, y:0.327015, z:-0.405043},
{x:0.083897, y:0.326368, z:-0.248622},
{x:0.091789, y:0.308865, z:-0.148830},
{x:0.086539, y:0.316370, z:-0.102742},
{x:0.079862, y:0.326693, z:-0.452653},
{x:0.084155, y:0.327498, z:-0.349156},
{x:0.071083, y:0.334474, z:-0.063698},
{x:0.039027, y:0.487082, z:-0.031190},
{x:0.039833, y:0.473205, z:0.002428},
{x:0.039855, y:0.537428, z:0.003284},
{x:0.039060, y:0.546813, z:-0.030511},
{x:0.045594, y:0.404675, z:-0.006006},
{x:0.045315, y:0.187661, z:-0.151691},
{x:0.022937, y:0.199021, z:-0.085514},
{x:0.023230, y:0.495112, z:-0.054152},
{x:0.006868, y:0.244863, z:-0.408095},
{x:0.039167, y:0.225206, z:-0.353331},
{x:0.022209, y:0.467438, z:0.030095},
{x:0.020957, y:0.531300, z:0.032216},
{x:0.034361, y:0.218978, z:-0.260504},
{x:0.039985, y:0.224910, z:-0.034209},
{x:0.017608, y:0.329051, z:-0.485706},
{x:0.036060, y:0.241366, z:-0.469707},
{x:0.022615, y:0.549882, z:-0.051019},
{x:0.043911, y:0.416709, z:-0.090042},
{x:0.047683, y:0.411454, z:-0.114376},
{x:0.028930, y:0.421953, z:-0.244881},
{x:0.045944, y:0.415825, z:-0.359922},
{x:0.041789, y:0.389128, z:-0.446017},
{x:0.051813, y:0.406239, z:-0.142819},
{x:0.021159, y:0.414276, z:-0.402652},
{x:0.024834, y:0.330802, z:0.008664},
{x:0.090120, y:0.314668, z:-0.192983},
{x:0.065198, y:0.380185, z:-0.187133},
{x:0.055945, y:0.365550, z:-0.034993},
{x:0.047013, y:0.411551, z:-0.057174},
{x:0.080190, y:0.226293, z:-0.192953},
{x:0.069469, y:0.256599, z:-0.046080},
{x:0.032834, y:0.186778, z:-0.173562},
{x:0.025817, y:0.433472, z:-0.079622},
{x:0.033798, y:0.417692, z:-0.170913},
{x:0.025823, y:0.261768, z:-0.022485},
{x:0.025538, y:0.425621, z:-0.118959},
{x:0.011801, y:0.209447, z:-0.086704},
{x:0.049569, y:0.328202, z:-0.477528},
{x:0.046379, y:0.362304, z:-0.467833},
{x:0.081541, y:0.333863, z:-0.301460},
{x:0.060941, y:0.391424, z:-0.306159},
{x:0.082124, y:0.261930, z:-0.467213},
{x:0.066612, y:0.269980, z:-0.309888},
{x:0.022193, y:0.376608, z:-0.464237},
{x:0.033574, y:0.253732, z:-0.326614},
{x:0.021578, y:0.271400, z:-0.478795},
{x:0.030175, y:0.421822, z:-0.326382},
{x:0.043078, y:0.409990, z:-0.406148},
{x:0.008452, y:0.225976, z:-0.411564},
{x:0.063440, y:0.138981, z:-0.116452},
{x:0.080486, y:0.162721, z:-0.086383},
{x:0.047578, y:0.166952, z:-0.140174},
{x:0.028044, y:0.161849, z:-0.085877},
{x:0.043339, y:0.178055, z:-0.041006},
{x:0.068882, y:0.180394, z:-0.045650},
{x:0.057918, y:0.097709, z:-0.093630},
{x:0.066155, y:0.099671, z:-0.070028},
{x:0.042029, y:0.098084, z:-0.094559},
{x:0.032851, y:0.100482, z:-0.071294},
{x:0.042986, y:0.119609, z:-0.050805},
{x:0.058290, y:0.081042, z:-0.053283},
{x:0.051937, y:0.014345, z:-0.077435},
{x:0.057480, y:0.017514, z:-0.066794},
{x:0.041984, y:0.013611, z:-0.076701},
{x:0.038936, y:0.018685, z:-0.064678},
{x:0.045452, y:0.017980, z:-0.055102},
{x:0.050075, y:0.017899, z:-0.055963},
{x:0.050580, y:0.000000, z:-0.073977},
{x:0.055262, y:0.000000, z:-0.063021},
{x:0.042285, y:0.000000, z:-0.073424},
{x:0.038776, y:0.000000, z:-0.060966},
{x:0.046091, y:0.000000, z:-0.053642},
{x:0.049118, y:0.000000, z:-0.054214},
{x:0.089717, y:0.164115, z:-0.437296},
{x:0.078539, y:0.130345, z:-0.406948},
{x:0.036985, y:0.135162, z:-0.407815},
{x:0.039807, y:0.185671, z:-0.478212},
{x:0.075018, y:0.186249, z:-0.478294},
{x:0.021639, y:0.168164, z:-0.436282},
{x:0.066785, y:0.106650, z:-0.484561},
{x:0.059753, y:0.093406, z:-0.460231},
{x:0.039602, y:0.096648, z:-0.461500},
{x:0.039736, y:0.097372, z:-0.510152},
{x:0.056387, y:0.095817, z:-0.510589},
{x:0.035141, y:0.111328, z:-0.484022},
{x:0.082492, y:0.166955, z:-0.378479},
{x:0.039843, y:0.166755, z:-0.374430},
{x:0.077106, y:0.143077, z:-0.381589},
{x:0.045883, y:0.145306, z:-0.378771},
{x:0.063005, y:0.134325, z:-0.500954},
{x:0.043599, y:0.135357, z:-0.500579},
{x:0.056343, y:0.118404, z:-0.519829},
{x:0.045468, y:0.118967, z:-0.519320},
{x:0.056168, y:0.012185, z:-0.042737},
{x:0.061769, y:0.010672, z:-0.051562},
{x:0.034086, y:0.009074, z:-0.048580},
{x:0.042371, y:0.010580, z:-0.041092},
{x:0.055734, y:0.000000, z:-0.042633},
{x:0.061099, y:0.000000, z:-0.052419},
{x:0.035297, y:0.000000, z:-0.049684},
{x:0.043840, y:0.000000, z:-0.041281},
{x:0.071036, y:0.169486, z:-0.137837},
{x:0.045154, y:0.139860, z:-0.117301},
{x:0.052150, y:0.149820, z:-0.141425},
{x:0.064386, y:0.150068, z:-0.140434},
{x:0.060794, y:0.119776, z:-0.052358},
{x:0.041064, y:0.081271, z:-0.052775},
{x:0.057121, y:0.099501, z:-0.048845},
{x:0.044655, y:0.099256, z:-0.047950},
{x:0.052640, y:0.016219, z:-0.500743},
{x:0.058441, y:0.016200, z:-0.490659},
{x:0.045431, y:0.016173, z:-0.500570},
{x:0.040894, y:0.015971, z:-0.488874},
{x:0.047495, y:0.016327, z:-0.480957},
{x:0.051572, y:0.016858, z:-0.481595},
{x:0.053434, y:0.000000, z:-0.495908},
{x:0.057867, y:0.000000, z:-0.490835},
{x:0.045600, y:0.000000, z:-0.495570},
{x:0.041257, y:0.000000, z:-0.488876},
{x:0.047857, y:0.000000, z:-0.478748},
{x:0.051367, y:0.000000, z:-0.479344},
{x:0.058302, y:0.011808, z:-0.467216},
{x:0.063630, y:0.010335, z:-0.475930},
{x:0.035638, y:0.009114, z:-0.472961},
{x:0.043314, y:0.010089, z:-0.465571},
{x:0.057708, y:0.000000, z:-0.466862},
{x:0.063107, y:0.000000, z:-0.476604},
{x:0.036843, y:0.000000, z:-0.474088},
{x:0.044690, y:0.000000, z:-0.465498},
{x:0.041725, y:0.345949, z:-0.003148},
{x:0.025683, y:0.398062, z:0.022936},
{x:0.040637, y:0.442064, z:-0.038697},
{x:0.022555, y:0.459524, z:-0.059399},
{x:0.046259, y:0.614842, z:-0.015855},
{x:0.041700, y:0.614820, z:-0.035683},
{x:0.023248, y:0.661228, z:-0.005440},
{x:0.024608, y:0.614995, z:-0.050800},
{x:0.019990, y:0.652749, z:-0.037847},
{x:0.037984, y:0.648398, z:-0.028171},
{x:0.035732, y:0.656059, z:-0.018194},
{x:0.023509, y:0.598254, z:0.024927},
{x:0.028997, y:0.615255, z:0.013447},
{x:0.013802, y:0.652057, z:0.023678},
{x:0.029181, y:0.639868, z:0.014967},
{x:0.023890, y:0.597140, z:0.039537},
{x:0.013678, y:0.592712, z:0.037821},
{x:0.025017, y:0.628406, z:0.040092},
{x:0.027551, y:0.641510, z:0.043005},
{x:0.029943, y:0.634984, z:0.034909},
{x:0.013255, y:0.590325, z:0.048956},
{x:0.011699, y:0.601533, z:0.082853},
{x:0.019954, y:0.629871, z:0.049341},
{x:0.005282, y:0.600222, z:0.093565},
{x:0.017189, y:0.633804, z:0.053339},
{x:0.012289, y:0.626977, z:0.094291},
{x:0.003652, y:0.620879, z:0.092653},
{x:0.040951, y:0.027008, z:-0.508170},
{x:0.055004, y:0.027029, z:-0.508528},
{x:0.042160, y:0.026179, z:-0.472387},
{x:0.055200, y:0.026218, z:-0.472804},
{x:0.034890, y:0.027225, z:-0.487316},
{x:0.064011, y:0.027102, z:-0.489367},
{x:0.053412, y:0.026792, z:-0.085825},
{x:0.053483, y:0.026692, z:-0.051713},
{x:0.038166, y:0.026732, z:-0.084667},
{x:0.062642, y:0.026566, z:-0.067148},
{x:0.041905, y:0.026652, z:-0.050173},
{x:0.033316, y:0.026721, z:-0.063794},
{x:0.043131, y:0.672068, z:-0.013725},
{x:0.057821, y:0.679200, z:-0.025524},
{x:0.046153, y:0.664558, z:-0.027646},
{x:0.038894, y:0.663286, z:-0.023809},
{x:0.032865, y:0.587998, z:0.020290},
{x:0.040267, y:0.614776, z:0.003285},
{x:0.023196, y:0.660878, z:0.022277},
{x:0.017799, y:0.581426, z:0.038739},
{x:0.035732, y:0.644747, z:0.009293},
{x:0.012994, y:0.652698, z:0.046265},
{x:0.010893, y:0.636887, z:0.065132},
{x:0.030050, y:0.615284, z:0.030542},
{x:0.030164, y:0.637972, z:0.024647},
{x:0.010136, y:0.621017, z:0.088592},
{x:0.011493, y:0.629907, z:0.086392},
{x:0.018171, y:0.658639, z:0.039093},
{x:0.024039, y:0.671285, z:0.040615},
{x:0.022578, y:0.619563, z:0.057641},
{x:0.007401, y:0.592053, z:0.059239},
{x:0.016449, y:0.595497, z:0.057918},
{x:0.010397, y:0.633508, z:0.075947},
{x:0.011752, y:0.621266, z:0.074965},
{x:0.011841, y:0.603274, z:0.071541},
{x:0.005032, y:0.601641, z:0.072257},
{x:0.015729, y:0.340167, z:-0.510626},
{x:0.015141, y:0.364685, z:-0.494661},
{x:0.013334, y:0.310709, z:-0.492362},
{x:0.013596, y:0.312145, z:-0.517029},
{x:0.011722, y:0.288761, z:-0.492503},
{x:0.010910, y:0.286558, z:-0.510575},
{x:0.011853, y:0.642765, z:0.057584},
{x:0.021458, y:0.639126, z:0.053288},
{x:-0.072691, y:0.373851, z:-0.146641},
{x:-0.068641, y:0.245800, z:-0.257230},
{x:-0.085912, y:0.217977, z:-0.151629},
{x:-0.059054, y:0.388676, z:-0.245400},
{x:-0.069626, y:0.378088, z:-0.109960},
{x:-0.093013, y:0.234862, z:-0.093351},
{x:-0.101201, y:0.250753, z:-0.413603},
{x:-0.068152, y:0.382598, z:-0.404795},
{x:-0.067795, y:0.388502, z:-0.353110},
{x:-0.059994, y:0.390040, z:-0.079016},
{x:-0.050474, y:0.306771, z:-0.023118},
{x:-0.079954, y:0.245099, z:-0.354174},
{x:-0.057025, y:0.285155, z:-0.479966},
{x:-0.062061, y:0.370456, z:-0.448008},
{x:-0.089734, y:0.327007, z:-0.405019},
{x:-0.083925, y:0.326336, z:-0.248614},
{x:-0.091758, y:0.308842, z:-0.148832},
{x:-0.086589, y:0.316361, z:-0.102736},
{x:-0.079885, y:0.326690, z:-0.452657},
{x:-0.084134, y:0.327420, z:-0.349134},
{x:-0.071097, y:0.334478, z:-0.063690},
{x:-0.039027, y:0.487082, z:-0.031189},
{x:-0.039826, y:0.473206, z:0.002416},
{x:-0.039855, y:0.537429, z:0.003284},
{x:-0.039059, y:0.546814, z:-0.030511},
{x:-0.045594, y:0.404679, z:-0.006022},
{x:-0.045318, y:0.187661, z:-0.151692},
{x:-0.022937, y:0.199020, z:-0.085516},
{x:-0.023230, y:0.495113, z:-0.054152},
{x:-0.006873, y:0.244854, z:-0.408100},
{x:-0.039200, y:0.225194, z:-0.353307},
{x:-0.022208, y:0.467437, z:0.030078},
{x:-0.020957, y:0.531301, z:0.032214},
{x:-0.034362, y:0.218967, z:-0.260502},
{x:-0.039986, y:0.224911, z:-0.034214},
{x:-0.017619, y:0.329034, z:-0.485713},
{x:-0.036078, y:0.241374, z:-0.469710},
{x:-0.022615, y:0.549882, z:-0.051019},
{x:-0.043914, y:0.416674, z:-0.090055},
{x:-0.047688, y:0.411435, z:-0.114386},
{x:-0.028929, y:0.421943, z:-0.244890},
{x:-0.045930, y:0.415784, z:-0.359925},
{x:-0.041782, y:0.389115, z:-0.445984},
{x:-0.051827, y:0.406255, z:-0.142825},
{x:-0.021153, y:0.414269, z:-0.402640},
{x:-0.024852, y:0.330804, z:0.008661},
{x:-0.090111, y:0.314641, z:-0.192987},
{x:-0.065217, y:0.380175, z:-0.187132},
{x:-0.055945, y:0.365555, z:-0.034997},
{x:-0.047013, y:0.411563, z:-0.057170},
{x:-0.080197, y:0.226296, z:-0.192951},
{x:-0.069441, y:0.256602, z:-0.046093},
{x:-0.032835, y:0.186786, z:-0.173560},
{x:-0.025813, y:0.433473, z:-0.079625},
{x:-0.033799, y:0.417699, z:-0.170920},
{x:-0.025828, y:0.261767, z:-0.022475},
{x:-0.025539, y:0.425609, z:-0.118980},
{x:-0.011802, y:0.209447, z:-0.086705},
{x:-0.049580, y:0.328173, z:-0.477520},
{x:-0.046403, y:0.362308, z:-0.467851},
{x:-0.081551, y:0.333849, z:-0.301459},
{x:-0.060940, y:0.391446, z:-0.306146},
{x:-0.082105, y:0.261910, z:-0.467192},
{x:-0.066640, y:0.269941, z:-0.309872},
{x:-0.022192, y:0.376606, z:-0.464251},
{x:-0.033581, y:0.253716, z:-0.326618},
{x:-0.021586, y:0.271398, z:-0.478783},
{x:-0.030172, y:0.421779, z:-0.326382},
{x:-0.043093, y:0.409904, z:-0.406109},
{x:-0.008478, y:0.225960, z:-0.411588},
{x:-0.063437, y:0.138981, z:-0.116452},
{x:-0.080486, y:0.162721, z:-0.086385},
{x:-0.047578, y:0.166951, z:-0.140174},
{x:-0.028044, y:0.161849, z:-0.085879},
{x:-0.043339, y:0.178055, z:-0.041006},
{x:-0.068883, y:0.180395, z:-0.045647},
{x:-0.057918, y:0.097709, z:-0.093630},
{x:-0.066155, y:0.099671, z:-0.070028},
{x:-0.042029, y:0.098084, z:-0.094559},
{x:-0.032851, y:0.100482, z:-0.071294},
{x:-0.042986, y:0.119609, z:-0.050805},
{x:-0.058290, y:0.081042, z:-0.053283},
{x:-0.051937, y:0.014345, z:-0.077435},
{x:-0.057480, y:0.017514, z:-0.066794},
{x:-0.041984, y:0.013611, z:-0.076701},
{x:-0.038936, y:0.018685, z:-0.064678},
{x:-0.045452, y:0.017980, z:-0.055102},
{x:-0.050075, y:0.017899, z:-0.055963},
{x:-0.050580, y:0.000000, z:-0.073977},
{x:-0.055262, y:0.000000, z:-0.063021},
{x:-0.042285, y:0.000000, z:-0.073424},
{x:-0.038776, y:0.000000, z:-0.060966},
{x:-0.046091, y:0.000000, z:-0.053642},
{x:-0.049118, y:0.000000, z:-0.054214},
{x:-0.089732, y:0.164118, z:-0.437300},
{x:-0.078539, y:0.130345, z:-0.406948},
{x:-0.036983, y:0.135163, z:-0.407817},
{x:-0.039807, y:0.185673, z:-0.478215},
{x:-0.075014, y:0.186251, z:-0.478290},
{x:-0.021642, y:0.168164, z:-0.436284},
{x:-0.066785, y:0.106650, z:-0.484561},
{x:-0.059753, y:0.093406, z:-0.460231},
{x:-0.039602, y:0.096648, z:-0.461500},
{x:-0.039736, y:0.097372, z:-0.510152},
{x:-0.056387, y:0.095817, z:-0.510589},
{x:-0.035141, y:0.111328, z:-0.484022},
{x:-0.082485, y:0.166982, z:-0.378527},
{x:-0.039865, y:0.166733, z:-0.374422},
{x:-0.077111, y:0.143073, z:-0.381587},
{x:-0.045879, y:0.145302, z:-0.378765},
{x:-0.063005, y:0.134325, z:-0.500954},
{x:-0.043599, y:0.135357, z:-0.500579},
{x:-0.056343, y:0.118404, z:-0.519829},
{x:-0.045468, y:0.118967, z:-0.519320},
{x:-0.056168, y:0.012185, z:-0.042737},
{x:-0.061769, y:0.010672, z:-0.051562},
{x:-0.034086, y:0.009074, z:-0.048580},
{x:-0.042371, y:0.010580, z:-0.041092},
{x:-0.055734, y:0.000000, z:-0.042633},
{x:-0.061099, y:0.000000, z:-0.052419},
{x:-0.035297, y:0.000000, z:-0.049684},
{x:-0.043840, y:0.000000, z:-0.041281},
{x:-0.071043, y:0.169482, z:-0.137842},
{x:-0.045156, y:0.139859, z:-0.117303},
{x:-0.052150, y:0.149820, z:-0.141425},
{x:-0.064387, y:0.150068, z:-0.140435},
{x:-0.060794, y:0.119776, z:-0.052358},
{x:-0.041064, y:0.081271, z:-0.052775},
{x:-0.057121, y:0.099501, z:-0.048845},
{x:-0.044655, y:0.099256, z:-0.047950},
{x:-0.052640, y:0.016219, z:-0.500743},
{x:-0.058441, y:0.016200, z:-0.490659},
{x:-0.045431, y:0.016173, z:-0.500570},
{x:-0.040895, y:0.015971, z:-0.488874},
{x:-0.047495, y:0.016327, z:-0.480957},
{x:-0.051572, y:0.016858, z:-0.481595},
{x:-0.053434, y:0.000000, z:-0.495908},
{x:-0.057867, y:0.000000, z:-0.490835},
{x:-0.045600, y:0.000000, z:-0.495570},
{x:-0.041257, y:0.000000, z:-0.488876},
{x:-0.047857, y:0.000000, z:-0.478748},
{x:-0.051367, y:0.000000, z:-0.479344},
{x:-0.058302, y:0.011808, z:-0.467216},
{x:-0.063630, y:0.010335, z:-0.475930},
{x:-0.035638, y:0.009114, z:-0.472961},
{x:-0.043314, y:0.010089, z:-0.465571},
{x:-0.057708, y:0.000000, z:-0.466862},
{x:-0.063107, y:0.000000, z:-0.476604},
{x:-0.036843, y:0.000000, z:-0.474088},
{x:-0.044690, y:0.000000, z:-0.465498},
{x:-0.041729, y:0.345955, z:-0.003162},
{x:-0.025699, y:0.398069, z:0.022914},
{x:-0.040636, y:0.442068, z:-0.038697},
{x:-0.022556, y:0.459534, z:-0.059397},
{x:-0.046259, y:0.614842, z:-0.015855},
{x:-0.041700, y:0.614820, z:-0.035683},
{x:-0.023248, y:0.661228, z:-0.005440},
{x:-0.024608, y:0.614995, z:-0.050800},
{x:-0.019990, y:0.652749, z:-0.037847},
{x:-0.037984, y:0.648398, z:-0.028171},
{x:-0.035732, y:0.656059, z:-0.018194},
{x:-0.023509, y:0.598254, z:0.024927},
{x:-0.028997, y:0.615255, z:0.013447},
{x:-0.013802, y:0.652057, z:0.023678},
{x:-0.029181, y:0.639868, z:0.014967},
{x:-0.023890, y:0.597140, z:0.039537},
{x:-0.013678, y:0.592712, z:0.037821},
{x:-0.025017, y:0.628406, z:0.040092},
{x:-0.027551, y:0.641510, z:0.043005},
{x:-0.029943, y:0.634984, z:0.034909},
{x:-0.013255, y:0.590325, z:0.048956},
{x:-0.011699, y:0.601533, z:0.082853},
{x:-0.019954, y:0.629871, z:0.049341},
{x:-0.005282, y:0.600222, z:0.093565},
{x:-0.017189, y:0.633804, z:0.053339},
{x:-0.012289, y:0.626977, z:0.094291},
{x:-0.003652, y:0.620879, z:0.092653},
{x:0.000002, y:0.430192, z:-0.173450},
{x:-0.000001, y:0.213177, z:-0.262964},
{x:0.000001, y:0.177902, z:-0.174221},
{x:0.000009, y:0.433428, z:-0.244636},
{x:0.000004, y:0.431706, z:-0.120875},
{x:0.000000, y:0.207037, z:-0.087101},
{x:0.000005, y:0.247491, z:-0.405466},
{x:0.000014, y:0.417996, z:-0.401605},
{x:0.000008, y:0.430852, z:-0.324245},
{x:0.000005, y:0.441574, z:-0.083705},
{x:-0.000001, y:0.258576, z:-0.018882},
{x:-0.000002, y:0.253289, z:-0.327274},
{x:0.000001, y:0.275378, z:-0.477152},
{x:0.000004, y:0.384603, z:-0.460986},
{x:0.000001, y:0.314856, z:-0.483574},
{x:-0.000000, y:0.497309, z:-0.060308},
{x:-0.000001, y:0.466374, z:0.040090},
{x:-0.000000, y:0.530578, z:0.042192},
{x:-0.000000, y:0.550544, z:-0.056825},
{x:-0.000010, y:0.325816, z:0.015945},
{x:-0.000013, y:0.395395, z:0.033295},
{x:-0.000001, y:0.464306, z:-0.065456},
{x:-0.000000, y:0.614973, z:-0.054963},
{x:-0.000000, y:0.667104, z:-0.007017},
{x:-0.000000, y:0.655068, z:-0.039204},
{x:0.000000, y:0.654263, z:0.028696},
{x:0.000000, y:0.591631, z:0.043392},
{x:0.000000, y:0.654041, z:0.047923},
{x:0.000000, y:0.592034, z:0.049288},
{x:0.000000, y:0.640437, z:0.069076},
{x:0.000000, y:0.603934, z:0.096238},
{x:0.000000, y:0.635365, z:0.087040},
{x:0.000000, y:0.632278, z:0.097715},
{x:0.000000, y:0.620857, z:0.092899},
{x:-0.040951, y:0.027008, z:-0.508170},
{x:-0.055004, y:0.027029, z:-0.508528},
{x:-0.042160, y:0.026179, z:-0.472387},
{x:-0.055200, y:0.026218, z:-0.472804},
{x:-0.034890, y:0.027225, z:-0.487316},
{x:-0.064011, y:0.027102, z:-0.489367},
{x:-0.053412, y:0.026792, z:-0.085825},
{x:-0.053483, y:0.026692, z:-0.051712},
{x:-0.038166, y:0.026732, z:-0.084667},
{x:-0.062642, y:0.026566, z:-0.067148},
{x:-0.041905, y:0.026652, z:-0.050173},
{x:-0.033316, y:0.026721, z:-0.063794},
{x:-0.043131, y:0.672068, z:-0.013725},
{x:-0.057821, y:0.679200, z:-0.025524},
{x:-0.046153, y:0.664558, z:-0.027646},
{x:-0.038894, y:0.663286, z:-0.023809},
{x:-0.032865, y:0.587998, z:0.020290},
{x:-0.040267, y:0.614776, z:0.003285},
{x:-0.023196, y:0.660878, z:0.022277},
{x:-0.017799, y:0.581426, z:0.038739},
{x:-0.035732, y:0.644747, z:0.009293},
{x:0.000000, y:0.581085, z:0.045010},
{x:-0.012994, y:0.652698, z:0.046265},
{x:-0.010893, y:0.636887, z:0.065132},
{x:-0.030050, y:0.615284, z:0.030542},
{x:-0.030164, y:0.637972, z:0.024647},
{x:-0.010136, y:0.621017, z:0.088592},
{x:-0.011493, y:0.629907, z:0.086392},
{x:-0.018171, y:0.658639, z:0.039093},
{x:0.000000, y:0.668925, z:0.020687},
{x:0.000000, y:0.658315, z:0.047051},
{x:0.000000, y:0.677345, z:0.049990},
{x:-0.024039, y:0.671285, z:0.040615},
{x:-0.022578, y:0.619563, z:0.057641},
{x:-0.007401, y:0.592053, z:0.059239},
{x:-0.016449, y:0.595497, z:0.057918},
{x:0.000000, y:0.592396, z:0.058978},
{x:-0.010397, y:0.633508, z:0.075947},
{x:-0.011752, y:0.621266, z:0.074965},
{x:-0.011841, y:0.603274, z:0.071541},
{x:-0.005032, y:0.601641, z:0.072257},
{x:0.000000, y:0.601280, z:0.072207},
{x:0.000000, y:0.637581, z:0.078029},
{x:-0.015738, y:0.340160, z:-0.510631},
{x:-0.015142, y:0.364700, z:-0.494690},
{x:0.000004, y:0.366593, z:-0.495130},
{x:-0.000002, y:0.343512, z:-0.516040},
{x:-0.013341, y:0.310698, z:-0.492356},
{x:-0.000003, y:0.308588, z:-0.487507},
{x:-0.013598, y:0.312131, z:-0.517022},
{x:-0.000003, y:0.311458, z:-0.522854},
{x:-0.011725, y:0.288759, z:-0.492505},
{x:-0.000002, y:0.289993, z:-0.487152},
{x:-0.010911, y:0.286568, z:-0.510565},
{x:-0.000005, y:0.282147, z:-0.507393},
{x:-0.011853, y:0.642765, z:0.057584},
{x:0.000000, y:0.644997, z:0.059913},
{x:-0.021458, y:0.639126, z:0.053288},
];

const faces = [
]

function translate_z({x,y,z}, dz) {
  return {x,y,z: z+dz}
}

function rotate_xz({x,y,z}, angle) {
  xprime = x*Math.cos(angle)-z*Math.sin(angle)
  zprime = x*Math.sin(angle)+z*Math.cos(angle)

  return {
    x: xprime,
    y,
    z: zprime
  }
}

function line(p1, p2) {
  ctx.lineWidth = 3
  ctx.strokeStyle = FOREGROUND_COLOR
  ctx.beginPath()
  ctx.moveTo(p1.x, p1.y)
  ctx.lineTo(p2.x, p2.y)
  ctx.stroke()
}

async function bootText() {
  ctx.fillStyle = "white"
  ctx.font = `50px Cascadia`
  typeText("BOOTING...", 280, 400)

  await delay(2000)
}

async function statsText() {
  ctx.fillStyle = "white"
  ctx.font = `30px ${FONT_FACE}`
  await typeText("CODENAME: A L P A C A", 200, 630, 200)
  await typeText('STATS:', 200, 660, 200)

  ctx.font = `20px ${FONT_FACE}`
  await typeText('- +10 FLUFFINESS', 180, 690, 100)
  await typeText('- +20 CUTENESS', 180, 710, 100)

  ctx.font = `30px ${FONT_FACE}`
  await typeText('ABILITIES:', 200, 740, 200)
  ctx.font = `20px ${FONT_FACE}`
  await typeText('- SPIT', 180, 770, 100)

}

/**
 * Prints text to the canvas with a typing simulation
 * @param {string} text characters to print
 * @param {number} x x-pos to place characters
 * @param {number} y y-pos to place characters
 * @param {number} charDelay delay in printing each character, defaults to 100ms
 */
async function typeText(text, x, y, charDelay=100){
  const textArray = text.split('')
  for(let i = 0; i < textArray.length; i++) {
    const str = "".concat(...textArray.slice(0, i+1))
    ctx.fillText(str, x, y)
    await delay(charDelay)
  }
}

function frame(){
  const dt = 1 / FPS
  angle += Math.PI*dt // revolutions per second
  clear()

  for(const coord of coordinates){
    const p = project(translate_z(rotate_xz(coord, angle), dz))
    const s = screen(p)
    drawPoint(s)
  }
  for(const face of faces) {
    for(let i = 0; i < face.length; i++) {
      let a = coordinates[face[i]]
      let b = coordinates[face[(i+1) % face.length]]

      line(
        screen(project(translate_z(rotate_xz(a, angle), dz))),
        screen(project(translate_z(rotate_xz(b, angle), dz))),
      )
    }
  }

  setTimeout(frame, 1000 / FPS)
}

async function main() {
  clear()
  ctx.fillStyle = BACKGROUND_COLOR
  ctx.fillRect(0, animatedalpaca.height - 200, animatedalpaca.width, 200)
  await bootText()
  setTimeout(frame, 1000 / FPS)
  await statsText()
}

animatedalpaca.width = 800
animatedalpaca.height = 800
const ctx = animatedalpaca.getContext('2d') // get context for 2d drawing

main()